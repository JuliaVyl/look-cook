(this.webpackJsonpcooking=this.webpackJsonpcooking||[]).push([[0],{38:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){"use strict";c.r(t);var r=c(1),a=c(2),n=c.n(a),i=c(30),s=c.n(i),o=c(5),l=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,65)).then((function(t){var c=t.getCLS,r=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),r(e),a(e),n(e),i(e)}))},u=c(8),j=c(21),d=c(41),f=c(29),b=c(17),p="FETCH_SHOW_ALL_FAVORITES_REQUEST",O="FETCH_SHOW_ALL_FAVORITES_SUCCESS",_="FETCH_SHOW_ALL_FAVORITES_FAILURE",v="FETCH_FAVORITE_RECIPE_REQUEST",m="FETCH_FAVORITE_RECIPE_SUCCESS",h="FETCH_FAVORITE_RECIPE_FAILURE",g="FETCH_UNFAVORITE_RECIPE_REQUEST",x="FETCH_UNFAVORITE_RECIPE_SUCCESS",y="FETCH_UNFAVORITE_RECIPE_FAILURE",N={favorites:[],status:!1,loading:!1,error:null},E="FETCH_ALL_RECIPES_REQUEST",C="FETCH_ALL_RECIPES_SUCCESS",S="FETCH_ALL_RECIPES_FAILURE",k="FILTER_RECIPES_BY_CATEGORY",T="FILTER_RECIPES_BY_TEXT",I={recipes:[],loading:!1,error:null,filterText:"",filterCategory:"All"},F="LOAD_USER",R={user:null},L=Object(j.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{user:t.payload};default:return e}},recipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{recipes:[],loading:!0,error:null,filterText:"",filterCategory:"All"};case C:return{recipes:t.payload,loading:!1,error:null,filterText:"",filterCategory:"All"};case S:return{recipes:[],loading:!1,error:t.payload,filterText:"",filterCategory:"All"};case T:return Object(b.a)(Object(b.a)({},e),{},{filterText:t.payload.trim().toLowerCase()});case k:var c=t.payload;return Object(b.a)(Object(b.a)({},e),{},{filterCategory:c});default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{favorites:[],status:!1,loading:!0,error:null};case O:return{favorites:t.payload,status:!0,loading:!1,error:null};case _:return{favorites:[],status:!1,loading:!1,error:t.payload};case v:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case m:return{favorites:[].concat(Object(f.a)(e.favorites),[t.payload]),status:!0,loading:!1,error:null};case h:return{favorites:Object(f.a)(e.favorites),status:!1,loading:!1,error:t.payload};case g:return{favorites:Object(f.a)(e.favorites),status:!1,loading:!0,error:null};case x:return{favorites:Object(f.a)(e.favorites),status:!0,loading:!1,error:null};case y:return{favorites:[],status:!1,loading:!1,error:t.payload};default:return e}}}),A=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__();A=function(e){return e};var w=Object(j.e)(L,Object(j.d)(Object(j.a)(d.a),A)),U=c(7),P=(c(22),c(12)),H=function(e){return{type:F,payload:e}},D=c(20),V=c(9),B=(c(52),c.p+"static/media/search.520bbe1d.svg"),z=(c(53),c.p+"static/media/close.67aa2dae.svg"),M=function(e){var t=e.closePannel,c=u.a.auth(),a=Object(P.a)(c),n=Object(U.a)(a,1)[0];return Object(r.jsxs)("div",{className:"signup",children:[Object(r.jsx)("div",{className:"signup__close",children:Object(r.jsx)("img",{src:z,alt:"close",onClick:t})}),Object(r.jsx)("button",{className:"signup__btn",onClick:function(){var e=new u.a.auth.GoogleAuthProvider;c.signInWithPopup(e)},children:"Sign In with Google"}),n&&Object(r.jsx)(V.a,{to:"/"})]})},W=c(19),X=c.n(W),Y=c(25),Q=(c(39),function(e){return{type:C,payload:e}}),G=function(){return function(){var e=Object(Y.a)(X.a.mark((function e(t){var c,r,a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:E}),e.prev=1,c=u.a.firestore(),r=c.collection("recipes"),e.next=6,r.get();case 6:(a=e.sent).empty&&console.log("No matching documents."),n=a.docs.map((function(e){return Object(b.a)({id:e.id},e.data())})),t(Q(n)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t((i=e.t0,{type:S,payload:i}));case 15:case"end":return e.stop()}var i}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},J=function(){var e=u.a.auth(),t=Object(P.a)(e),c=Object(U.a)(t,1)[0],n=Object(a.useState)(""),i=Object(U.a)(n,2),s=i[0],l=i[1],j=Object(a.useState)(!1),d=Object(U.a)(j,2),f=d[0],b=d[1],p=Object(a.useState)(!1),O=Object(U.a)(p,2),_=O[0],v=O[1],m=Object(a.useState)(!0),h=Object(U.a)(m,2),g=h[0],x=h[1],y=Object(o.b)();return Object(r.jsx)("div",{className:"navbar",children:Object(r.jsxs)("nav",{className:"navbar__wrapper",children:[Object(r.jsx)("p",{className:"navbar__logo",children:"Look and cook"}),Object(r.jsxs)("ul",{className:"navbar__list",children:[!_&&g&&Object(r.jsx)("li",{className:"navbar__item",children:Object(r.jsx)("div",{className:"navbar__item-search",children:Object(r.jsx)("img",{className:"navbar__item-search-ico",src:B,alt:"search",onClick:function(){return v(!0)}})})}),_&&g&&Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),y({type:T,payload:s})},children:[Object(r.jsx)("input",{className:"navbar__search-field",type:"text",autoComplete:"off",placeholder:"Write dish",value:s,onChange:function(e){l(e.target.value)}}),Object(r.jsx)("button",{className:"navbar__search-btn",children:"Search"})]}),Object(r.jsx)("li",{className:"navbar__item",children:Object(r.jsx)(D.b,{className:"navbar__item-link navbar__item-link_active",to:"/",onClick:function(){return x(!0)},children:"Recipies"})}),c&&Object(r.jsx)("li",{className:"navbar__item",onClick:function(){return x(!1)},children:Object(r.jsx)(D.b,{className:"navbar__item-link",to:"/profile",children:"Profile"})}),!c&&Object(r.jsx)(D.b,{className:"navbar__item-link",to:"/signin",onClick:function(){return b(!0)},children:"Sign In"})]}),f&&Object(r.jsx)(M,{closePannel:function(){return b(!1)}})]})})},K=(c(57),c(58),function(){var e=u.a.auth(),t=Object(P.a)(e),c=Object(U.a)(t,2),a=c[0],n=c[1];return Object(r.jsxs)("div",{className:"profile",children:[n&&Object(r.jsx)("p",{className:"profile__loading",children:"Loading..."}),!n&&a&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"profile__cover",children:Object(r.jsx)("img",{className:"profile__cover-img",src:a.photoURL,alt:"avatar"})}),Object(r.jsx)("div",{className:"profile__description",children:Object(r.jsxs)("div",{className:"profile__descrition-info",children:[Object(r.jsx)("h1",{className:"profile__name",children:a.displayName}),Object(r.jsx)("p",{className:"profile__recipes",children:"3 favorite recipes"})]})})]})]})}),Z=(c(59),c.p+"static/media/favorite.5535092f.svg"),q=c.p+"static/media/add-favorite.96f1acaa.svg",$=function(e){return{type:O,payload:e}},ee=function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(c){var r,a,n,i;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:p}),t.prev=1,r=u.a.firestore(),a=r.collection("favorites"),t.next=6,a.where("user","==",e).get();case 6:(n=t.sent).empty&&console.log("No matching documents."),i=n.docs.map((function(e){return Object(b.a)({id:e.id},e.data())})),c($(i)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c((s=t.t0,{type:_,payload:s}));case 15:case"end":return t.stop()}var s}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},te=function(){return{type:v}},ce=function(e){return{type:g,payload:e}},re=(c(60),function(e){var t=e.recipe,c=e.closeFullRecipe;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"bg-items"}),Object(r.jsxs)("div",{className:"full-recipe",children:[Object(r.jsx)("div",{className:"signup__close",children:Object(r.jsx)("img",{src:z,alt:"close",onClick:function(){return c()}})}),Object(r.jsxs)("div",{className:"full-recipe__header",children:[Object(r.jsx)("div",{className:"full-recipe__cover",children:Object(r.jsx)("img",{className:"full-recipe__cover-img",src:t.image,alt:"dish"})}),Object(r.jsxs)("div",{className:"full-recipe__about",children:[Object(r.jsx)("h1",{className:"full-recipe__title",children:t.title}),Object(r.jsxs)("div",{className:"full-recipe__main-info",children:[Object(r.jsxs)("p",{className:"full-recipe__time",children:[t.time," min"]}),Object(r.jsxs)("p",{className:"full-recipe__serves",children:[t.serves," serves"]}),Object(r.jsxs)("p",{className:"full-recipe__level",children:["Level - ",t.level]})]})]})]}),Object(r.jsx)("p",{className:"full-recipe__description",children:t.description})]})]})}),ae=function(e){var t=e.recipe,c=e.favorite,n=Object(a.useState)(!1),i=Object(U.a)(n,2),s=i[0],l=i[1],j=Object(a.useState)(!1),d=Object(U.a)(j,2),f=d[0],b=d[1],p=Object(o.c)((function(e){return e.user.user})),O=Object(o.b)(),_=function(e){var t,c;p&&O((t=e,c=p.email,function(){var e=Object(Y.a)(X.a.mark((function e(r){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(te),e.prev=1,a=u.a.firestore(),e.next=5,a.collection("favorites").add({favoriteId:t,user:c});case 5:n=e.sent,r((s={id:n.id,favoriteId:t,user:c},{type:m,payload:s})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r((i=e.t0,{type:h,payload:i}));case 12:case"end":return e.stop()}var i,s}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))},v=function(e){p&&O(function(e,t){return function(){var c=Object(Y.a)(X.a.mark((function c(r){var a;return X.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r(ce(e)),c.prev=1,a=u.a.firestore(),c.next=5,a.collection("favorites").where("favoriteId","==",e).where("user","==",t).get().then((function(e){e.forEach((function(e){console.log(e.id,"=>",e.data()),a.collection("favorites").doc(e.id).delete()}))}));case 5:r({type:x,payload:!0}),r(ee(t)),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),r((n=c.t0,{type:y,payload:n}));case 12:case"end":return c.stop()}var n}),c,null,[[1,9]])})));return function(e){return c.apply(this,arguments)}}()}(e,p.email))};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"recipe",children:[Object(r.jsx)("div",{className:"recipe__cover",children:Object(r.jsx)("img",{className:"recipe__cover-img",src:t.image,alt:"dish"})}),!c&&p&&Object(r.jsx)("div",{className:"recipe__favorites",children:Object(r.jsx)("img",{className:"recipe__favorites-ico",src:q,alt:"favorite",onClick:function(){return _(t.id)}})}),!p&&Object(r.jsxs)("div",{className:"recipe__favorites",children:[Object(r.jsx)("img",{className:"recipe__favorites-ico",src:q,alt:"favorite",onClick:function(){return b(!0),void setTimeout((function(){return b(!1)}),4e3)}}),f&&Object(r.jsx)("p",{className:"recipe__alert",children:"You need to authorize to add favorites"})]}),c&&p&&Object(r.jsx)("div",{className:"recipe__favorites",children:Object(r.jsx)("img",{className:"recipe__favorites-ico",src:Z,alt:"favorite",onClick:function(){return v(t.id)}})}),Object(r.jsxs)("div",{className:"recipe__description",children:[Object(r.jsx)("h1",{className:"recipe__title",children:t.title}),Object(r.jsxs)("div",{className:"recipe__main-info",children:[Object(r.jsxs)("p",{className:"recipe__time",children:[t.time," min"]}),Object(r.jsxs)("p",{className:"recipe__serves",children:[t.serves," serves"]}),Object(r.jsxs)("p",{className:"recipe__level",children:["Level - ",t.level]})]}),Object(r.jsx)("p",{className:"recipe__text",children:t.description}),Object(r.jsx)("button",{className:"recipe__btn",onClick:function(){l(!0)},children:"Show full recipe"})]}),s&&Object(r.jsx)(re,{recipe:t,closeFullRecipe:function(){return l(!1)}})]})})},ne=(c(38),function(){var e=u.a.auth(),t=Object(P.a)(e),c=Object(U.a)(t,2)[1],n=Object(o.c)((function(e){return e.user.user})),i=Object(o.b)(),s=Object(o.c)((function(e){return e.recipes.recipes})),l=Object(o.c)((function(e){return e.favorites.favorites})),j=[];return Object(a.useEffect)((function(){n&&i(ee(n.email)),i(G())}),[i,n]),j=Object(a.useMemo)((function(){return s.filter((function(e){return l.find((function(t){return e.id===t.favoriteId}))}))}),[s,l]),Object(r.jsxs)("div",{className:"recipes",children:[c&&Object(r.jsx)("p",{className:"recipes__loading",children:"Loading..."}),!j.length&&Object(r.jsx)("p",{className:"recipes__no-rec",style:{fontSize:"22px"},children:"You have no favorite recipes..."}),j.map((function(e){return Object(r.jsx)(ae,{recipe:e,favorite:!0},e.id)}))]})}),ie=[{id:1,category:"Profile"},{id:2,category:"My recipes"},{id:3,category:"Favorites"},{id:4,category:"Log out"}],se=function(){var e=u.a.auth(),t=Object(P.a)(e),c=Object(U.a)(t,2),n=c[0],i=c[1],s=Object(o.b)();Object(a.useEffect)((function(){n||s(G())}),[n,s]);var l=Object(a.useState)(ie[0].category),j=Object(U.a)(l,2),d=j[0],f=j[1],b="categories__item",p=function(e){return e===d?"categories__item categories__item_active":b};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"categories",children:[Object(r.jsxs)("ul",{className:"categories__list",children:[Object(r.jsx)("li",{className:p(ie[0].category),onClick:function(){return f(ie[0].category)},children:ie[0].category}),Object(r.jsx)("li",{className:p(ie[2].category),onClick:function(){return f(ie[2].category)},children:ie[2].category}),Object(r.jsx)("li",{className:p(ie[3].category),onClick:function(){e.signOut().then((function(){return s(H(null))}))},children:ie[3].category})]}),!n&&!i&&Object(r.jsx)(V.a,{to:"/"})]}),"Profile"===d&&Object(r.jsx)(K,{}),"Favorites"===d&&Object(r.jsx)(ne,{})]})},oe=(c(61),function(){return Object(r.jsx)("div",{className:"profile-page",children:Object(r.jsx)(se,{})})}),le=(c(62),[{id:0,category:"All"},{id:1,category:"Breakfast"},{id:2,category:"Lunch"},{id:3,category:"Soups"},{id:4,category:"Salads"},{id:5,category:"Dinner"},{id:6,category:"Desserts"},{id:7,category:"Drinks"}]),ue=function(){var e=Object(a.useState)(le[0].category),t=Object(U.a)(e,2),c=t[0],n=t[1],i="categories__item",s=Object(o.b)(),l=function(e){return e===c?"categories__item categories__item_active":i};return Object(a.useEffect)((function(){s(function(e){return{type:k,payload:e}}(c))}),[s,c]),Object(r.jsx)("div",{className:"categories",children:Object(r.jsxs)("ul",{className:"categories__list",children:[Object(r.jsx)("li",{className:l(le[0].category),onClick:function(){return n(le[0].category)},children:le[0].category}),Object(r.jsx)("li",{className:l(le[1].category),onClick:function(){return n(le[1].category)},children:le[1].category}),Object(r.jsx)("li",{className:l(le[2].category),onClick:function(){return n(le[2].category)},children:le[2].category}),Object(r.jsx)("li",{className:l(le[3].category),onClick:function(){return n(le[3].category)},children:le[3].category}),Object(r.jsx)("li",{className:l(le[4].category),onClick:function(){return n(le[4].category)},children:le[4].category}),Object(r.jsx)("li",{className:l(le[5].category),onClick:function(){return n(le[5].category)},children:le[5].category}),Object(r.jsx)("li",{className:l(le[6].category),onClick:function(){return n(le[6].category)},children:le[6].category}),Object(r.jsx)("li",{className:l(le[7].category),onClick:function(){return n(le[7].category)},children:le[7].category})]})})},je=function(){var e=u.a.auth(),t=Object(P.a)(e),c=Object(U.a)(t,2)[1],n=Object(o.c)((function(e){return e.user.user})),i=Object(o.b)();Object(a.useEffect)((function(){i(G())}),[i]),Object(a.useEffect)((function(){n&&i(ee(n.email))}),[n,i]);var s=Object(o.c)((function(e){return e.recipes.recipes})),l=Object(o.c)((function(e){return e.recipes.filterText})),j=Object(o.c)((function(e){return e.recipes.filterCategory}));s=Object(a.useMemo)((function(){return""===l?s:s.filter((function(e){return e.title.trim().toLowerCase().includes(l)}))}),[s,l]),s=Object(a.useMemo)((function(){return"All"===j?s:s.filter((function(e){return e.category===j}))}),[s,j]);var d=Object(o.c)((function(e){return e.favorites.favorites}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"recipes",children:[c&&Object(r.jsx)("p",{className:"recipes__loading",children:"Loading..."}),s.map((function(e){var t=!1;return d.length&&d.forEach((function(c){c.favoriteId===e.id&&(t=!0)})),Object(r.jsx)(ae,{recipe:e,favorite:t},e.id)}))]}),Object(r.jsx)(ue,{})]})},de=function(){var e=u.a.auth(),t=Object(P.a)(e),c=Object(U.a)(t,1)[0],n=Object(o.b)();return Object(a.useEffect)((function(){c&&n(H({email:c.email,name:c.displayName,photoUrl:c.photoURL}))}),[c,n]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(D.a,{children:[Object(r.jsx)(J,{}),Object(r.jsxs)(V.d,{children:[Object(r.jsx)(V.b,{path:"/profile",component:oe,exact:!0}),Object(r.jsx)(V.b,{path:"/signin",component:M,exact:!0}),Object(r.jsx)(V.b,{path:"/",component:je,exact:!0})]})]})})};c(63);u.a.initializeApp({apiKey:"AIzaSyDE30ZK07TH9HnIw8HkvUzw1nP9gEHbyVk",authDomain:"look-and-cook-e12b6.firebaseapp.com",projectId:"look-and-cook-e12b6",storageBucket:"look-and-cook-e12b6.appspot.com",messagingSenderId:"355592548247",appId:"1:355592548247:web:ed7bffbe0e2d1d34125ed2"}),s.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(o.a,{store:w,children:Object(r.jsx)(de,{})})}),document.getElementById("root")),l()}},[[64,1,2]]]);
//# sourceMappingURL=main.73d7006b.chunk.js.map